<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø¯Ø§Ù…Ø§ Ø¨Ø±Ùˆ - Ù…Ø¹ Ø£ØµÙˆØ§Øª ØªÙØ§Ø¹Ù„ÙŠØ©</title>
    <style>
        :root { --board-dark: #5d3a2a; --board-light: #e0c091; }
        * { touch-action: none; -webkit-tap-highlight-color: transparent; user-select: none; box-sizing: border-box; }
        body { background: #1a1a1a; color: white; text-align: center; font-family: 'Segoe UI', sans-serif; margin: 0; overflow: hidden; width: 100vw; height: 100vh; }
        .header { background: #2c2c2c; padding: 10px; border-bottom: 3px solid #444; height: 100px; }
        .score-board { display: flex; justify-content: space-around; font-weight: bold; font-size: 1.1rem; margin-top: 10px; }
        .score-box { color: #f1c40f; font-size: 1.3rem; }
        .board-container { display: flex; justify-content: center; align-items: center; height: calc(100vh - 100px); padding: 10px; }
        .board { display: grid; grid-template-columns: repeat(8, 1fr); width: 95vw; height: 95vw; max-width: 450px; max-height: 450px; border: 12px solid #3e2723; background: #3e2723; box-shadow: 0 15px 40px rgba(0,0,0,0.8); }
        .cell { width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; }
        .dark { background: var(--board-dark); }
        .light { background: var(--board-light); }
        .piece { width: 82%; height: 82%; border-radius: 50%; position: relative; box-shadow: inset 0 -4px 6px rgba(0,0,0,0.4), 0 5px 10px rgba(0,0,0,0.5); transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .white { background: radial-gradient(circle at 35% 35%, #ffffff, #dcdde1); border: 1px solid #999; }
        .black { background: radial-gradient(circle at 35% 35%, #444, #000); border: 1px solid #222; }
        .king::after { content: 'ğŸ‘‘'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 1.4rem; filter: drop-shadow(0 2px 2px #000); }
        .selected { transform: scale(1.15); border: 3px solid #f1c40f !important; z-index: 10; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(241, 196, 15, 0.7); } 70% { box-shadow: 0 0 0 15px rgba(241, 196, 15, 0); } 100% { box-shadow: 0 0 0 0 rgba(241, 196, 15, 0); } }
        #overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 1000; justify-content: center; align-items: center; flex-direction: column; }
        .btn { padding: 15px 40px; border-radius: 30px; background: #c0392b; color: white; border: none; font-size: 1.2rem; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>
    <audio id="moveSound" src="https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3"></audio>
    <audio id="captureSound" src="https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3"></audio>
    <audio id="kingSound" src="https://assets.mixkit.co/active_storage/sfx/2019/2019-preview.mp3"></audio>

    <div class="header">
        <div id="status">Ø¯ÙˆØ±Ùƒ Ø§Ù„Ø¢Ù† (Ø§Ù„Ø£Ø¨ÙŠØ¶)</div>
        <div class="score-board">
            <div>Ø£Ù†Øª: <span id="p-score" class="score-box">0</span></div>
            <div>Ø§Ù„Ø¨ÙˆØª: <span id="b-score" class="score-box">0</span></div>
        </div>
    </div>

    <div class="board-container">
        <div class="board" id="board"></div>
    </div>

    <div id="overlay">
        <h2 id="winner-text"></h2>
        <button class="btn" onclick="resetGame()">ØªØ­Ø¯ÙŠ Ø¬Ø¯ÙŠØ¯</button>
    </div>

    <script>
        const boardEl = document.getElementById('board');
        const statusEl = document.getElementById('status');
        const pScoreEl = document.getElementById('p-score');
        const bScoreEl = document.getElementById('b-score');
        const moveSnd = document.getElementById('moveSound');
        const captureSnd = document.getElementById('captureSound');
        const kingSnd = document.getElementById('kingSound');

        let board = Array(64).fill(null);
        let turn = 'player';
        let selected = null;
        let isMultiJump = false;

        let pScore = parseInt(localStorage.getItem('pScore')) || 0;
        let bScore = parseInt(localStorage.getItem('bScore')) || 0;
        pScoreEl.innerText = pScore; bScoreEl.innerText = bScore;

        function playSnd(type) {
            if (type === 'move') { moveSnd.currentTime = 0; moveSnd.play().catch(()=>{}); }
            if (type === 'capture') { captureSnd.currentTime = 0; captureSnd.play().catch(()=>{}); }
            if (type === 'king') { kingSnd.currentTime = 0; kingSnd.play().catch(()=>{}); }
        }

        function init() {
            board = Array(64).fill(null);
            for (let i = 0; i < 64; i++) {
                let r = Math.floor(i/8), c = i%8;
                if ((r + c) % 2 !== 0) {
                    if (r < 3) board[i] = { color: 'bot', king: false };
                    else if (r > 4) board[i] = { color: 'player', king: false };
                }
            }
            isMultiJump = false; selected = null; turn = 'player';
            statusEl.innerText = "Ø¯ÙˆØ±Ùƒ Ø§Ù„Ø¢Ù† (Ø§Ù„Ø£Ø¨ÙŠØ¶)";
            render();
        }

        function render() {
            boardEl.innerHTML = '';
            board.forEach((p, i) => {
                const cell = document.createElement('div');
                cell.className = `cell ${(Math.floor(i / 8) + i % 8) % 2 !== 0 ? 'dark' : 'light'}`;
                if (p) {
                    const div = document.createElement('div');
                    div.className = `piece ${p.color === 'player' ? 'white' : 'black'} ${p.king ? 'king' : ''}`;
                    if (selected === i) div.classList.add('selected');
                    cell.appendChild(div);
                }
