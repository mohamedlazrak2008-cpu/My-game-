<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>داما مغربية - النسخة الأصلية</title>
    <style>
        :root { --board-dark: #7b4a35; --board-light: #f0d9b5; --player: #e74c3c; --bot: #2c3e50; }
        body { background: #1a1a1a; color: white; text-align: center; font-family: sans-serif; margin: 0; touch-action: manipulation; }
        .status { background: #333; padding: 15px; font-weight: bold; border-bottom: 2px solid #555; }
        .board { display: grid; grid-template-columns: repeat(8, 1fr); width: 95vw; height: 95vw; max-width: 450px; max-height: 450px; margin: 20px auto; border: 10px solid #5d3a2a; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .cell { width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; }
        .dark { background: var(--board-dark); }
        .light { background: var(--board-light); }
        .piece { width: 80%; height: 80%; border-radius: 50%; box-shadow: inset 0 -5px 5px rgba(0,0,0,0.3), 0 5px 10px rgba(0,0,0,0.4); cursor: pointer; transition: 0.2s; }
        .red { background: var(--player); border: 2px solid #c0392b; }
        .black-piece { background: var(--bot); border: 2px solid #000; }
        .selected { transform: scale(1.15); border: 4px solid #f1c40f !important; box-shadow: 0 0 20px #f1c40f; }
        button { padding: 12px 25px; border-radius: 5px; background: #27ae60; color: white; border: none; font-size: 1rem; cursor: pointer; }
    </style>
</head>
<body>
    <div class="status" id="status">دورك الآن (الأحمر)</div>
    <div class="board" id="board"></div>
    <button onclick="location.reload()">إعادة بدء اللعبة</button>

    <script>
        const boardEl = document.getElementById('board');
        const statusEl = document.getElementById('status');
        let selectedIndex = null;
        let turn = 'player';
        let gameState = Array(64).fill(null);

        function init() {
            for (let i = 0; i < 64; i++) {
                const row = Math.floor(i / 8), col = i % 8;
                if ((row + col) % 2 !== 0) {
                    if (row < 3) gameState[i] = 'bot';
                    else if (row > 4) gameState[i] = 'player';
                }
            }
            render();
        }

        function render() {
            boardEl.innerHTML = '';
            gameState.forEach((type, i) => {
                const row = Math.floor(i / 8), col = i % 8;
                const cell = document.createElement('div');
                cell.className = `cell ${(row + col) % 2 !== 0 ? 'dark' : 'light'}`;
                if (type) {
                    const p = document.createElement('div');
                    p.className = `piece ${type === 'player' ? 'red' : 'black-piece'}`;
                    if (selectedIndex === i) p.classList.add('selected');
                    cell.appendChild(p);
                }
                cell.onclick = () => handleClick(i);
                boardEl.appendChild(cell);
            });
        }

        function handleClick(i) {
            if (turn !== 'player') return;
            if (gameState[i] === 'player') {
                selectedIndex = i;
            } else if (selectedIndex !== null && gameState[i] === null && (Math.floor(i/8) + i%8)%2 !== 0) {
                const diff = selectedIndex - i;
                if (diff === 7 || diff === 9) { // حركة بسيطة للأمام
                    gameState[i] = 'player';
                    gameState[selectedIndex] = null;
                    selectedIndex = null;
                    turn = 'bot';
                    statusEl.innerText = "البوت يفكر...";
                    setTimeout(botPlay, 1000);
                }
            }
            render();
        }

        function botPlay() {
            let moves = [];
            gameState.forEach((p, i) => {
                if (p === 'bot') {
                    [i+7, i+9].forEach(t => {
                        if (t < 64 && gameState[t] === null && (Math.floor(t/8) + t%8)%2 !== 0) moves.push({f:i, t:t});
                    });
                }
            });
            if (moves.length) {
                const m = moves[Math.floor(Math.random()*moves.length)];
                gameState[m.t] = 'bot'; gameState[m.f] = null;
            }
            turn = 'player';
            statusEl.innerText = "دورك الآن (الأحمر)";
            render();
        }
        init();
    </script>
</body>
</html>
